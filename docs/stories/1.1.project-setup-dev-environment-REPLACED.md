# Story 1.1: Project Setup & Development Environment

## Status
Draft

## Story

**As a** developer,
**I want** a fully configured development environment with TypeScript, testing framework, and CI/CD pipeline,
**so that** I can develop features efficiently and deploy reliably.

## Acceptance Criteria

1. Monorepo structure created with separate frontend/backend packages and shared types
2. React + TypeScript frontend configured with Tailwind CSS and Vite
3. NestJS backend configured with TypeScript and PostgreSQL connection
4. Basic test framework setup (Jest) with sample tests passing
5. CI/CD pipeline configured for automated testing and deployment
6. Development database setup with basic user and task schema
7. Health check endpoints functional on both frontend and backend
8. Basic placeholder UI screens for immediate local testing
9. Comprehensive test data fixtures and seeding scenarios

## Tasks / Subtasks

- [ ] Initialize monorepo structure (AC: 1)
  - [ ] Create root package.json with npm workspaces
  - [ ] Set up packages/shared for TypeScript types
  - [ ] Create apps/web for frontend
  - [ ] Create apps/api for Vercel Functions
- [ ] Configure frontend development environment (AC: 2)
  - [ ] Set up React 18 with TypeScript
  - [ ] Configure Tailwind CSS and PostCSS
  - [ ] Set up Vite build system with proper config
  - [ ] Install and configure UI dependencies (Headless UI, React Router)
- [ ] Configure backend development environment (AC: 3)
  - [ ] Set up Vercel Functions structure
  - [ ] Configure TypeScript compilation for functions
  - [ ] Set up Supabase client and connection utilities
  - [ ] Create database connection and configuration management
- [ ] Set up testing infrastructure (AC: 4)
  - [ ] Configure Vitest for both frontend and backend
  - [ ] Set up React Testing Library for component tests
  - [ ] Create sample tests and ensure they pass
  - [ ] Configure test scripts in package.json
- [ ] Configure CI/CD pipeline (AC: 5)
  - [ ] Set up GitHub Actions workflow
  - [ ] Configure automated testing on pull requests
  - [ ] Set up Vercel deployment integration
  - [ ] Configure environment variable management
- [ ] Set up development database (AC: 6)
  - [ ] Initialize Supabase project and local development
  - [ ] Create database migrations for users and tasks tables
  - [ ] Set up Row Level Security policies
  - [ ] Configure database seeding for development
- [ ] Create health check endpoints (AC: 7)
  - [ ] Frontend health check showing build info
  - [ ] Backend API health check with database connectivity
  - [ ] Integration test verifying end-to-end connectivity
- [ ] Create basic placeholder UI screens (AC: 8)
  - [ ] Build placeholder login screen with basic form
  - [ ] Create placeholder dashboard screen with navigation
  - [ ] Add basic routing between placeholder screens
  - [ ] Include "Coming Soon" placeholders for future features
- [ ] Implement comprehensive test data system (AC: 9)
  - [ ] Create multiple test user personas with different data
  - [ ] Generate sample task hierarchies for testing
  - [ ] Add test scenarios (empty state, full data, edge cases)
  - [ ] Create database reset and reload scripts for development

## Dev Notes

### Architecture Context
Based on the architecture document, this story establishes the **serverless-first architecture** on Vercel + Supabase platform:

- **Repository Structure**: Monorepo with npm workspaces (not Nx/Turborepo for simplicity)
- **Frontend Stack**: React 18+, TypeScript, Tailwind CSS, Vite
- **Backend Stack**: Vercel Functions, TypeScript, Supabase PostgreSQL, Supabase Auth
- **Deployment**: Vercel for both frontend and API functions, Supabase for managed database

### Database Schema Foundation
Implement the core database schema from architecture document:
- users table with Supabase Auth integration
- tasks table with hierarchical support (parent_task_id)
- Core indexes for performance

### Project Structure
Follow the unified project structure specified in architecture:
```
simple-todo/
├── apps/
│   ├── web/          # React frontend
│   └── api/          # Vercel Functions
├── packages/
│   ├── shared/       # Shared TypeScript types
│   ├── ui/           # Shared UI components
│   └── config/       # Shared configuration
```

### Testing Standards
- **Frontend**: Vitest + React Testing Library
- **Backend**: Vitest for function testing
- **E2E**: Playwright (future story)
- **Test Location**: `apps/web/tests/` and `apps/api/tests/`
- **Test Standards**: Follow testing pyramid - unit tests for business logic, integration tests for API endpoints

### Environment Configuration
Required environment variables per architecture:
- VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY
- SUPABASE_SERVICE_ROLE_KEY for backend functions
- Vercel deployment configuration

### Basic UI Boilerplate Structure
Create minimal placeholder screens for immediate local testing:
```
apps/web/src/
├── pages/
│   ├── LoginPage.tsx          # Basic login form placeholder
│   ├── DashboardPage.tsx      # Simple dashboard placeholder
│   └── NotFoundPage.tsx       # 404 page
├── components/
│   ├── Layout.tsx             # Basic layout wrapper
│   ├── Navigation.tsx         # Simple navigation bar
│   └── PlaceholderCard.tsx    # "Coming Soon" components
└── utils/
    └── testHelpers.ts         # Development utilities
```

### Test Data Scenarios
Comprehensive fixtures for local development:
- **Empty User**: New user with no tasks (onboarding flow testing)
- **Light User**: User with 3-5 simple tasks (basic functionality)
- **Power User**: User with 20+ tasks including hierarchies (performance testing)
- **Edge Case User**: Tasks with special characters, long descriptions, complex hierarchies
- **Multi-Context User**: Mix of work and personal tasks for context switching

### Local Development Verification
After Story 1.1 completion, developer should be able to:
1. Run `npm run dev` and see placeholder login screen
2. Navigate between login/dashboard placeholders
3. Connect to local Supabase and see test data
4. Run tests and see all passing
5. View health check endpoints showing green status

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-02 | 1.0 | Initial story creation | Sarah (PO Agent) |

## Dev Agent Record

*This section will be populated during implementation*

## QA Results

*This section will be populated during QA review*